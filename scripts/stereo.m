clear all
warning('off','vision:transition:usesOldCoordinates'); 
warning('off', 'MATLAB:nearlySingularMatrix'); 

pattern = imread('../image/pattern500x680.png'); 
pattern = rgb2gray(pattern); 

l0 = imread('../image/bo-special/1-0.bmp'); 
l1 = imread('../image/bo-special/1-1.bmp'); 
l2 = imread('../image/bo-special/1-2.bmp'); 
l3 = imread('../image/bo-special/1-3.bmp'); 
l4 = imread('../image/bo-special/1-4.bmp'); 
l5 = imread('../image/bo-special/1-5.bmp'); 
l6 = imread('../image/bo-special/1-6.bmp'); 
l7 = imread('../image/bo-special/1-7.bmp'); 
l8 = imread('../image/bo-special/1-8.bmp'); 
l9 = imread('../image/bo-special/1-9.bmp'); 
l10 = imread('../image/bo-special/1-10.bmp'); 
l11 = imread('../image/bo-special/1-11.bmp'); 
l12 = imread('../image/bo-special/1-12.bmp'); 
l13 = imread('../image/bo-special/1-13.bmp'); 
l14 = imread('../image/bo-special/1-14.bmp'); 
l15 = imread('../image/bo-special/1-15.bmp'); 
l16 = imread('../image/bo-special/1-16.bmp'); 
l17 = imread('../image/bo-special/1-17.bmp'); 
l18 = imread('../image/bo-special/1-18.bmp'); 
l19 = imread('../image/bo-special/1-19.bmp'); 
l20 = imread('../image/bo-special/1-20.bmp'); 
l21 = imread('../image/bo-special/1-21.bmp'); 
l22 = imread('../image/bo-special/1-22.bmp'); 
l23 = imread('../image/bo-special/1-23.bmp'); 
l24 = imread('../image/bo-special/1-24.bmp'); 
l25 = imread('../image/bo-special/1-25.bmp'); 
l26 = imread('../image/bo-special/1-26.bmp'); 
l27 = imread('../image/bo-special/1-27.bmp'); 
l28 = imread('../image/bo-special/1-28.bmp'); 
l29 = imread('../image/bo-special/1-29.bmp'); 

r0 = imread('../image/bo-special/2-0.bmp'); 
r1 = imread('../image/bo-special/2-1.bmp'); 
r2 = imread('../image/bo-special/2-2.bmp'); 
r3 = imread('../image/bo-special/2-3.bmp'); 
r4 = imread('../image/bo-special/2-4.bmp'); 
r5 = imread('../image/bo-special/2-5.bmp'); 
r6 = imread('../image/bo-special/2-6.bmp'); 
r7 = imread('../image/bo-special/2-7.bmp'); 
r8 = imread('../image/bo-special/2-8.bmp'); 
r9 = imread('../image/bo-special/2-9.bmp'); 
r10 = imread('../image/bo-special/2-10.bmp'); 
r11 = imread('../image/bo-special/2-11.bmp'); 
r12 = imread('../image/bo-special/2-12.bmp'); 
r13 = imread('../image/bo-special/2-13.bmp'); 
r14 = imread('../image/bo-special/2-14.bmp'); 
r15 = imread('../image/bo-special/2-15.bmp'); 
r16 = imread('../image/bo-special/2-16.bmp'); 
r17 = imread('../image/bo-special/2-17.bmp'); 
r18 = imread('../image/bo-special/2-18.bmp'); 
r19 = imread('../image/bo-special/2-19.bmp'); 
r20 = imread('../image/bo-special/2-20.bmp'); 
r21 = imread('../image/bo-special/2-21.bmp'); 
r22 = imread('../image/bo-special/2-22.bmp'); 
r23 = imread('../image/bo-special/2-23.bmp'); 
r24 = imread('../image/bo-special/2-24.bmp'); 
r25 = imread('../image/bo-special/2-25.bmp'); 
r26 = imread('../image/bo-special/2-26.bmp'); 
r27 = imread('../image/bo-special/2-27.bmp'); 
r28 = imread('../image/bo-special/2-28.bmp'); 
r29 = imread('../image/bo-special/2-29.bmp'); 

% pcc = PinholeCameraCalibration(size(l1, 2), size(l1, 1), pattern); 
% pcc.addPhoto(l1); 
% pcc.addPhoto(l2); 
% pcc.addPhoto(l3); 
% pcc.addPhoto(l4); 
% pcc.addPhoto(l5); 
% pcc.calibrate(); 
% return; 

csc = CameraSystemCalibration(2,  pattern); 
csc.fixIntrinsics = false; 
csc.setCameraType(1, 'catacamera', size(l1, 2), size(l1, 1)); 
csc.setCameraType(2, 'pinholecamera', size(l1, 2), size(l1, 1)); 

% csc.addPhoto(1, l0, '0'); 
% csc.addPhoto(1, l1, '1'); 
% csc.addPhoto(1, l2, '2'); 
% csc.addPhoto(1, l3, '3'); 
% csc.addPhoto(1, l4, '4'); 
% csc.addPhoto(1, l5, '5'); 
% csc.addPhoto(1, l6, '6'); 
% csc.addPhoto(1, l7, '7'); 
% csc.addPhoto(1, l8, '8'); 
% csc.addPhoto(1, l9, '9'); 
% csc.addPhoto(1, l10, '10'); 
% csc.addPhoto(1, l11, '11'); 
% csc.addPhoto(1, l12, '12'); 
% csc.addPhoto(1, l13, '13'); 
% csc.addPhoto(1, l14, '14'); 
% csc.addPhoto(1, l15, '15'); 
% csc.addPhoto(1, l16, '16'); 
% csc.addPhoto(1, l17, '17'); 
% csc.addPhoto(1, l18, '18'); 
% csc.addPhoto(1, l19, '19'); 
% csc.addPhoto(1, l20, '20'); 
% csc.addPhoto(1, l21, '21'); 
% csc.addPhoto(1, l22, '22'); 
% csc.addPhoto(1, l23, '23'); 
% csc.addPhoto(1, l24, '24'); 
% csc.addPhoto(1, l25, '25'); 
% csc.addPhoto(1, l26, '26'); 
% csc.addPhoto(1, l27, '27'); 
% csc.addPhoto(1, l28, '28'); 
% csc.addPhoto(1, l29, '29'); 
% 
% 
% csc.addPhoto(2, r0, '0'); 
% csc.addPhoto(2, r1, '1'); 
% csc.addPhoto(2, r2, '2'); 
% csc.addPhoto(2, r3, '3'); 
% csc.addPhoto(2, r4, '4'); 
% csc.addPhoto(2, r5, '5'); 
% csc.addPhoto(2, r6, '6'); 
% csc.addPhoto(2, r7, '7'); 
% csc.addPhoto(2, r8, '8'); 
% csc.addPhoto(2, r9, '9'); 
% csc.addPhoto(2, r10, '10'); 
% csc.addPhoto(2, r11, '11'); 
% csc.addPhoto(2, r12, '12'); 
% csc.addPhoto(2, r13, '13'); 
% csc.addPhoto(2, r14, '14'); 
% csc.addPhoto(2, r15, '15'); 
% csc.addPhoto(2, r16, '16'); 
% csc.addPhoto(2, r17, '17'); 
% csc.addPhoto(2, r18, '18'); 
% csc.addPhoto(2, r19, '19'); 
% csc.addPhoto(2, r20, '20'); 
% csc.addPhoto(2, r21, '21'); 
% csc.addPhoto(2, r22, '22'); 
% csc.addPhoto(2, r23, '23'); 
% csc.addPhoto(2, r24, '24'); 
% csc.addPhoto(2, r25, '25'); 
% csc.addPhoto(2, r26, '26'); 
% csc.addPhoto(2, r27, '27'); 
% csc.addPhoto(2, r28, '28'); 
% csc.addPhoto(2, r29, '29'); 
% 
% 
% 
% csc.save('cscs'); 
csc.load('cscs'); 
csc.calibrate(); 
csc.cameraCalibrations(1).plotPatternBound(1); 